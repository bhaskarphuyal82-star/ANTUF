# ğŸ¨ GetStream Video Call - Visual Architecture Diagram

## ğŸ“Š System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ADMIN CHAT INTERFACE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Chat Header                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  User Name            [ğŸ¤] [ğŸ“¹] [âš™ï¸] [Status â–¾]     â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ‘¤    â”‚  Subject â€¢ Category                                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜                          â†‘                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                               â”‚
â”‚                        Click Video Button                               â”‚
â”‚                                         â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              VIDEO CALL COMPONENT OPENS                          â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚   ğŸ“¹ Video Call - John Doe                        [â›¶] [âœ•]      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                                                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              REMOTE VIDEO STREAM                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           (User's Camera Feed)                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚   LOCAL      â”‚     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚   VIDEO      â”‚     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚ (Admin Cam)  â”‚     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚   ğŸ”´ Live â€¢ 02:15                                               â”‚   â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚          [ğŸ¤]         [ğŸ“¹]         [ğŸ“]                         â”‚  â”‚
â”‚  â”‚         Toggle       Toggle        End                          â”‚  â”‚
â”‚  â”‚          Mic         Camera        Call                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin     â”‚
â”‚  Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Click Video Button
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AdminChat Component   â”‚
â”‚  - handleStartVideoCall()â”‚
â”‚  - setOpenVideoCall(true)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Component Mounts
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VideoCallComponent          â”‚
â”‚  - useEffect() triggers      â”‚
â”‚  - initializeCall()          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. POST Request
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /api/video-call              â”‚
â”‚  - Verify session             â”‚
â”‚  - Create GetStream call      â”‚
â”‚  - Return config              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. POST Request
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /api/video-call/token        â”‚
â”‚  - Verify user ID             â”‚
â”‚  - Generate secure token      â”‚
â”‚  - Return token               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Initialize Client
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StreamVideoClient            â”‚
â”‚  - Connect with token         â”‚
â”‚  - Initialize user session    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. Join Call
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GetStream Video API          â”‚
â”‚  - Establish WebRTC           â”‚
â”‚  - Start signaling            â”‚
â”‚  - Create media streams       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Video/Audio Streams
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VideoCallComponent UI        â”‚
â”‚  - Display remote stream      â”‚
â”‚  - Display local stream       â”‚
â”‚  - Show controls              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APPLICATION LAYER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              AdminChat Component                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  State Management                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - openVideoCall (boolean)                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - selectedChat (object)                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - isCallActive (boolean)                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Event Handlers                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - handleStartVideoCall()                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - handleEndVideoCall()                           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Dynamic Import                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  const VideoCall = dynamic(...)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  { ssr: false }                                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                â”‚
â”‚                              â”‚ Props                          â”‚
â”‚                              â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         VideoCallComponent (Lazy Loaded)                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Props                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - open (from parent)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - onClose (callback)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - callId (unique ID)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - participantName (string)                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  State                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - client (StreamVideoClient)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - call (StreamCall)                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - loading (boolean)                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - error (string)                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - isFullscreen (boolean)                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  GetStream Components                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  <StreamVideo client={client}>                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    <StreamCall call={call}>                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      <SpeakerLayout />                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      <CallControls />                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    </StreamCall>                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  </StreamVideo>                                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT SIDE (Browser)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  âœ… Has Access To:                                             â”‚
â”‚     - NEXT_PUBLIC_STREAM_API_KEY (public, safe)              â”‚
â”‚     - User session (Next-Auth)                                â”‚
â”‚     - UI components                                            â”‚
â”‚                                                                â”‚
â”‚  âŒ NO Access To:                                              â”‚
â”‚     - STREAM_API_SECRET (server-side only!)                   â”‚
â”‚     - Token generation logic                                   â”‚
â”‚     - Other users' data                                        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS Only
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API ROUTES (Server)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  /api/video-call (POST)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Verify Next-Auth session âœ…                         â”‚   â”‚
â”‚  â”‚ 2. Get STREAM_API_SECRET from .env ğŸ”’                 â”‚   â”‚
â”‚  â”‚ 3. Create GetStream call                               â”‚   â”‚
â”‚  â”‚ 4. Return config (NO SECRET!) âœ…                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â”‚  /api/video-call/token (POST)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Verify Next-Auth session âœ…                         â”‚   â”‚
â”‚  â”‚ 2. Verify user ID matches session âœ…                   â”‚   â”‚
â”‚  â”‚ 3. Use STREAM_API_SECRET to generate token ğŸ”’         â”‚   â”‚
â”‚  â”‚ 4. Return token only (NO SECRET!) âœ…                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Secure Token
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GETSTREAM VIDEO API                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  - Validates token signature                                   â”‚
â”‚  - Establishes WebRTC connection                              â”‚
â”‚  - Routes video/audio streams                                 â”‚
â”‚  - Manages call state                                          â”‚
â”‚  - Provides TURN/STUN servers                                 â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Responsive UI States

### Desktop View (1920x1080)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¹ Video Call - John Doe                     [â›¶] [âœ•]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚               REMOTE VIDEO (1280x720)                        â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚                                      â”‚  LOCAL VIDEO   â”‚      â”‚ â”‚
â”‚  â”‚                                      â”‚   (320x180)    â”‚      â”‚ â”‚
â”‚  â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  ğŸ”´ Live â€¢ 02:15                                                  â”‚
â”‚                                                                    â”‚
â”‚                [ğŸ¤]        [ğŸ“¹]        [ğŸ“]                       â”‚
â”‚               Mute      Camera       End Call                     â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet View (768x1024)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¹ John Doe          [â›¶] [âœ•]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚     REMOTE VIDEO               â”‚  â”‚
â”‚  â”‚      (640x480)                 â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚              â”‚  LOCAL   â”‚      â”‚  â”‚
â”‚  â”‚              â”‚  VIDEO   â”‚      â”‚  â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  ğŸ”´ Live â€¢ 02:15                     â”‚
â”‚                                      â”‚
â”‚     [ğŸ¤]    [ğŸ“¹]    [ğŸ“]            â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile View (375x667)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¹ John           â”‚
â”‚          [â›¶] [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              â”‚  â”‚
â”‚  â”‚   REMOTE     â”‚  â”‚
â”‚  â”‚   VIDEO      â”‚  â”‚
â”‚  â”‚  (320x240)   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚    â”‚LOC â”‚    â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â”‚
â”‚  ğŸ”´ 02:15          â”‚
â”‚                    â”‚
â”‚  [ğŸ¤] [ğŸ“¹] [ğŸ“]   â”‚
â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Call State Machine

```
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  IDLE   â”‚ â† Initial state
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚
            â”‚ User clicks video button
            â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ LOADING â”‚ â† Connecting...
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€ Success â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚             â”‚ CONNECTED â”‚ â† Video streams active
            â”‚             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚
            â”‚                   â”‚ During call
            â”‚                   â†“
            â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚             â”‚  ACTIVE   â”‚ â† User can control
            â”‚             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚
            â”‚                   â”‚ User ends call
            â”‚                   â†“
            â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚             â”‚  ENDING   â”‚ â† Cleanup
            â”‚             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚                   â”‚
            â””â”€â”€ Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                               â”‚â”‚
                               â†“â†“
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  CLOSED â”‚ â† Back to idle
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Š Audio/Video Stream Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin's       â”‚                              â”‚    User's       â”‚
â”‚   Device        â”‚                              â”‚    Device       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                 â”‚
         â”‚ 1. Capture camera/mic                          â”‚
         â†“                                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MediaStream    â”‚                              â”‚  MediaStream    â”‚
â”‚  - Video track  â”‚                              â”‚  - Video track  â”‚
â”‚  - Audio track  â”‚                              â”‚  - Audio track  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                 â”‚
         â”‚ 2. Send to GetStream                           â”‚
         â†“                                                 â†“
         â”‚                                                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚       â”‚
                            â†“       â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  GetStream Servers  â”‚
                    â”‚  - WebRTC Signaling â”‚
                    â”‚  - TURN/STUN        â”‚
                    â”‚  - Stream Routing   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 3. Route streams
                               â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                           â”‚
         â†“                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin sees     â”‚                        â”‚  User sees      â”‚
â”‚  User's stream  â”‚                        â”‚  Admin's stream â”‚
â”‚  (remote video) â”‚                        â”‚  (remote video) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Metrics Flow

```
Video Call Started
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Initial Connection      â”‚
â”‚  Time: ~1-2 seconds      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Video Stream Quality    â”‚
â”‚  Resolution: Adaptive    â”‚
â”‚  720p-1080p              â”‚
â”‚  FPS: 30                 â”‚
â”‚  Bitrate: 1-2 Mbps      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Audio Stream Quality    â”‚
â”‚  Codec: Opus             â”‚
â”‚  Bitrate: 32-128 kbps   â”‚
â”‚  Latency: <100ms        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Adaptation      â”‚
â”‚  Monitor bandwidth       â”‚
â”‚  Adjust quality          â”‚
â”‚  Handle packet loss      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  End-to-End Latency      â”‚
â”‚  Target: <500ms          â”‚
â”‚  Typical: 200-400ms      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI Component Hierarchy

```
VideoCallComponent
â”‚
â”œâ”€â”€ Dialog (Material-UI)
â”‚   â”‚
â”‚   â”œâ”€â”€ DialogTitle
â”‚   â”‚   â”œâ”€â”€ Typography (Participant name)
â”‚   â”‚   â””â”€â”€ IconButton (Fullscreen, Close)
â”‚   â”‚
â”‚   â””â”€â”€ DialogContent
â”‚       â”‚
â”‚       â”œâ”€â”€ Loading State
â”‚       â”‚   â””â”€â”€ CircularProgress + Text
â”‚       â”‚
â”‚       â”œâ”€â”€ Error State
â”‚       â”‚   â””â”€â”€ Alert + Typography
â”‚       â”‚
â”‚       â””â”€â”€ Active Call State
â”‚           â”‚
â”‚           â”œâ”€â”€ StreamVideo (GetStream)
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â”€ StreamCall
â”‚           â”‚       â”‚
â”‚           â”‚       â”œâ”€â”€ StreamTheme
â”‚           â”‚       â”‚   â”‚
â”‚           â”‚       â”‚   â”œâ”€â”€ SpeakerLayout
â”‚           â”‚       â”‚   â”‚   â”œâ”€â”€ Remote Video
â”‚           â”‚       â”‚   â”‚   â””â”€â”€ Local Video (PiP)
â”‚           â”‚       â”‚   â”‚
â”‚           â”‚       â”‚   â””â”€â”€ CallControls
â”‚           â”‚       â”‚       â”œâ”€â”€ Mic Button
â”‚           â”‚       â”‚       â”œâ”€â”€ Camera Button
â”‚           â”‚       â”‚       â””â”€â”€ End Call Button
â”‚           â”‚       â”‚
â”‚           â”‚       â””â”€â”€ CallStats (optional)
â”‚           â”‚
â”‚           â””â”€â”€ Custom Overlay
â”‚               â”œâ”€â”€ Status Indicator
â”‚               â””â”€â”€ Duration Timer
```

---

## ğŸ”„ Event Flow Timeline

```
Time  Event                         Component           API Call
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

T+0s  User clicks video button      AdminChat           -
      â”‚
      â†“
T+0s  State updated                 AdminChat           -
      setOpenVideoCall(true)
      â”‚
      â†“
T+0s  Component mounts              VideoCallComponent  -
      â”‚
      â†“
T+0s  useEffect triggers            VideoCallComponent  -
      initializeCall()
      â”‚
      â†“
T+0s  API request                   VideoCallComponent  POST /api/video-call
      â”‚                                                  Body: { callId, callType }
      â†“
T+1s  Server response               -                   Response: { apiKey, userId }
      â”‚
      â†“
T+1s  API request                   VideoCallComponent  POST /api/video-call/token
      â”‚                                                  Body: { userId }
      â†“
T+2s  Token received                -                   Response: { token }
      â”‚
      â†“
T+2s  Initialize client             VideoCallComponent  -
      StreamVideoClient()
      â”‚
      â†“
T+3s  Join call                     VideoCallComponent  call.join()
      â”‚
      â†“
T+4s  WebRTC connection             GetStream           -
      established
      â”‚
      â†“
T+5s  Video streams start           VideoCallComponent  -
      â”‚
      â†“
T+5s  UI updated                    VideoCallComponent  -
      setLoading(false)
      â”‚
      â†“
...   Active call                   VideoCallComponent  -
      User controls available
      â”‚
      â†“
T+Xs  User ends call                VideoCallComponent  -
      â”‚
      â†“
T+Xs  Leave call                    VideoCallComponent  call.leave()
      â”‚
      â†“
T+Xs  Disconnect client             VideoCallComponent  client.disconnectUser()
      â”‚
      â†“
T+Xs  Component unmounts            VideoCallComponent  -
      Cleanup complete
```

---

## ğŸ“ File Dependency Graph

```
AdminChat.js
    â”‚
    â”œâ”€â”€ Imports
    â”‚   â”œâ”€â”€ React hooks (useState, useEffect, useRef)
    â”‚   â”œâ”€â”€ Material-UI components
    â”‚   â”œâ”€â”€ Next-Auth (useSession)
    â”‚   â”œâ”€â”€ react-toastify (toast)
    â”‚   â””â”€â”€ dynamic (Next.js)
    â”‚
    â””â”€â”€ Dynamic Import
        â”‚
        â””â”€â”€ VideoCallComponent.js
            â”‚
            â”œâ”€â”€ Imports
            â”‚   â”œâ”€â”€ @stream-io/video-react-sdk
            â”‚   â”‚   â”œâ”€â”€ StreamVideo
            â”‚   â”‚   â”œâ”€â”€ StreamVideoClient
            â”‚   â”‚   â”œâ”€â”€ StreamCall
            â”‚   â”‚   â”œâ”€â”€ SpeakerLayout
            â”‚   â”‚   â””â”€â”€ CallControls
            â”‚   â”œâ”€â”€ Material-UI components
            â”‚   â”œâ”€â”€ Next-Auth (useSession)
            â”‚   â””â”€â”€ react-toastify (toast)
            â”‚
            â””â”€â”€ API Calls
                â”‚
                â”œâ”€â”€ /api/video-call
                â”‚   â”‚
                â”‚   â””â”€â”€ route.js
                â”‚       â”‚
                â”‚       â”œâ”€â”€ Imports
                â”‚       â”‚   â”œâ”€â”€ @stream-io/video-react-sdk
                â”‚       â”‚   â”œâ”€â”€ Next.js (NextResponse)
                â”‚       â”‚   â””â”€â”€ Next-Auth (getServerSession)
                â”‚       â”‚
                â”‚       â””â”€â”€ Uses
                â”‚           â””â”€â”€ Environment Variables
                â”‚               â”œâ”€â”€ NEXT_PUBLIC_STREAM_API_KEY
                â”‚               â””â”€â”€ STREAM_API_SECRET
                â”‚
                â””â”€â”€ /api/video-call/token
                    â”‚
                    â””â”€â”€ route.js
                        â”‚
                        â”œâ”€â”€ Imports
                        â”‚   â”œâ”€â”€ stream-chat
                        â”‚   â”œâ”€â”€ Next.js (NextResponse)
                        â”‚   â””â”€â”€ Next-Auth (getServerSession)
                        â”‚
                        â””â”€â”€ Uses
                            â””â”€â”€ Environment Variables
                                â”œâ”€â”€ NEXT_PUBLIC_STREAM_API_KEY
                                â””â”€â”€ STREAM_API_SECRET
```

---

## ğŸ¯ Quick Reference: Key Concepts

### 1. StreamVideoClient
```
Purpose: Main client connection to GetStream
Lifecycle: Created â†’ Connected â†’ Active â†’ Disconnected
Responsibilities:
  - Authenticate user
  - Manage connection state
  - Handle reconnection
  - Create/join calls
```

### 2. StreamCall
```
Purpose: Individual call instance
Lifecycle: Created â†’ Joined â†’ Active â†’ Left
Responsibilities:
  - Manage call participants
  - Control media streams
  - Handle call state
  - Emit call events
```

### 3. Token
```
Purpose: Secure authentication
Lifecycle: Generated â†’ Used â†’ Expires
Responsibilities:
  - Verify user identity
  - Authorize API access
  - Secure communication
Generation: Server-side only!
```

### 4. Media Streams
```
Purpose: Audio/video data flow
Types:
  - Local stream (camera/mic)
  - Remote stream (other user)
Controls:
  - Enable/disable video
  - Mute/unmute audio
  - Screen share (future)
```

---

**ğŸ“Š Documentation Version:** 1.0.0  
**ğŸ¨ Visual Guide Status:** Complete âœ…  
**ğŸ“… Last Updated:** November 9, 2025  
**ğŸ¯ Purpose:** Architecture visualization and flow diagrams
